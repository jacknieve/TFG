<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
    <head>
        <title>Spring Security Example</title>
		<meta charset="UTF-8">
    	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.1/angular.min.js"></script>
    	<link th:href="@{/css/style.css}" rel="stylesheet" />
    	<script th:src="@{/js/restconsumer.js}"></script>
    </head>
    <body ng-app="appPrueba">
        <h1>Welcome!</h1>
        
        <p>Click <a th:href="@{/login}">here</a> to see a greeting.</p>
        <p>Click <a th:href="@{/user/registration}">here</a> to see register.</p>
        <div>{{5+5}}</div>
		<div ng-controller="consumerController">
		<div><button ng-click="getUsuarios()">Obtener users</button></div>
		<div ng-show="cargando">Cargando...</div>
		<ul>
			<li ng-repeat="usuario in usuarios">Nombre: {{usuario.username}}, Área: {{usuario.area}}, Mentor: {{usuario.mentor}}
			<div><button ng-click="getPerfil(usuario.id)">Acceder perfil</button></div>
			<ul ng-show="usuario.expandido">
				<li>{{usuario.info.edad}}</li>
				<li><form name="form">
				<div><label for="descripcion">Descripción</label></div>
				<div><input type="text" ng-model="usuario.form.descripcion" id="descripcion"></div>
				<button ng-click="addNotificacion(usuario)">Aceptar</button>
				</form></li>
			</ul>
			</li>
		</ul>
		<div><button ng-click="addUser()">Nuevo user</button></div>
		<div><button ng-click="removeUser()">Quitar user</button></div>
		</div>
		<div ng-controller="notificacionController">
			<!--<div ng-init="iniciaNotificaciones">-->
			<div ng-show="cargando">Cargando...</div>
			<ul ng-show="mostrarnot">
			<li ng-repeat="notificacion in notificaciones">Descripcion: {{notificacion.descripcion}}, Estado: {{notificacion.estado}}, Fecha envio: {{notificacion.fechaenv}}
			<div> <button ng-click="borrarNotificacion(notificacion.id)">Borrar notificacion</button></div>
			</li>
			</ul>
			<!--</div>-->
			<div> <button ng-click="detenActualizacion()">Parar actualizacion</button></div>
			<div> <button ng-click="iniciaNotificaciones()">Restear actualizacion</button></div>
		</div>
		
    </body>
</html>